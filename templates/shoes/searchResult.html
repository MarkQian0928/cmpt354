

{% extends 'base.html' %}

{% block title %}Search{% endblock %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static "css/searchResult.css" %}">

    <div class="searchOptions">
        <ul>
            <li class="heading">Projection</li>
            <form action="/shoes/searchResult/" method="get">
                <input type="text" name="projectBy" value="{{ query }}"/>
                <input type="submit", value="Search" name="project">
            </form>
            <li class="heading">SHOE COUNT PER:</li>
            <form action="/shoes/searchResult/">
                <input type="submit" value="Brand" name="groupByBrand">
                <input type="submit" value="Category" name="groupByCategory">
                <input type="submit" value="Retailer" name="groupByRetailer">
            </form>
        </ul>
    </div>
    <div class="searchResultContainer">
        <div class="resultsTitle" style="border-bottom: 2px black solid; border-top: 2px black solid; margin-top: 20px">
            <h1 style="font-family: Source Sans Pro;">Results</h1>
        </div> 
        <ul>
            <table>
                <tr>

                    {% if results.price__max %}
                        <th>average price</th>
                    {% else %} 
                        <th>ShoeID</th>
                        <th>Brand</th>
                        <th>Category</th> 
                        <th>Size</th>
                        <th>Gender</th>
                        <th>Color</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Availability</th>
                        <th>Retailer</th>

                        <th>Group By Count</th>

                        <th>BUY</th>
                    {% endif %}

                </tr>
           
            {% for shoes in results %}
                {% if results.price__max %}
                    <tr>
                        <td>{{results.price__max}}</td>
                    </tr>
                {% else %}  
                    <tr>
                        <!-- <td>
                            <form action="#" method="get">
                                <input type="submit", value="buy" name="buy">
                            </form>
                        </td> -->
                        <td>{{shoes.id}}</td>
                        <td>{{ shoes.brand }}</td>
                        <td>{{ shoes.category}}</td>
                        <td>{{shoes.size}}</td>
                        <td>{{shoes.gender}}</td>
                        <td>{{shoes.color}}</td>
                        <td>{{shoes.description}}</td>
                        <td>{{shoes.price}}</td>
                        <td>{{shoes.numOfAvail}}</td>
                        <td>{{shoes.retailID}}</td>
                        <th>{{shoes.Count}}</th>
                        <td>
                            <form action="/transactions/test" method="get">
                                <input type="hidden", value={{shoes.id}} name ="shoeID"/>
                                # purchase:<input type="text", value="{{ query }}" name ="num"/>
                                <input type="hidden", value={{shoes.numOfAvail}} name ="originN"/>
                                <input type="hidden", value={{shoes.price}} name ="price"/>
                                <input type="submit", value="buy" name="buy">
                            </form>
                        </td>
                    
                    </tr>
                {% endif %}
            {% empty %}
            </table>
            <h1>No Qualified Shoes yet.</h1>
        {% endfor %}
        </ul>




        <form action="/shoes/searchResult/" method="get">
            Projection: show only brand, size and price<input type="submit", value="click" name="projection">
        </form>

        <br><br>
        <form action="/shoes/searchResult/" method="get">
            show only man shoes<input type="submit", value="click" name="man">
        </form>
        <br><br>
        <form action="/shoes/searchResult/" method="get">
            show only women shoes<input type="submit", value="click" name="women">
        </form>

        <br><br>
        <form action="/shoes/searchResult/" method="get">
            Selection: Filter by color:<input type="text" name="colorFilter" value="{{ query }}"/>
            <input type="submit", value="click" name="color">
        </form>

        <br><br>
        <form action="/shoes/searchResult/" method="get">
            Aggregation: Max Price:<input type="submit", value="click" name="price">
        </form>

        <br><br>
        <form action="/shoes/searchResult/" method="get">
            nested: count shoes for each retailer<input type="submit", value="click" name="nested">
        </form>

        <br><br>
        <form action="/shoes/searchResult/" method="get">
            Delete: by shoeID <input type="text" name="deleteShoe" value="{{ query }}"/>
            <input type="submit", value="click" name="delete">
        </form>

        <br><br>
        <form action="/shoes/searchResult/" method="get">
            Show all:<input type="submit", value="click" name="all">
        </form>
        <br><br>
        <a href="/">back to home page</a>
        <form action="/shoes/searchResult/" method="get">
            Selection: Filter by desc:<input type="text" name="searchQuery" value="{{ query }}"/>
            <input type="submit", value="click" name="description">
        </form>
        <br><br>
    </div>
{% endblock %}





<!-- {% if results %}
  {% for result in results %}
    {{ result.id }}
    {{ result.brand }}
    {{ result.size }}
  {% endfor %}
{% else %}
    <h3 class='error'>Please enter a valid UID</h3>
    <form method="get" action="/search/">
      Search Notecards:<input type="text" name="q" id="id_q" value="{{ query }}"/>
      <input type="submit" value="Search" />
    </form>
{% endif %} -->


